// espepay_main_with_splash_and_login.dart
// Edu-tech mobile-first mockup for EspePay
// Flutter stable + null-safety

import 'package:flutter/material.dart';

void main() => runApp(EspePayApp());

class EspePayApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'EspePay',
      debugShowCheckedModeBanner: false,
      theme: _buildLightTheme(),
      darkTheme: _buildDarkTheme(),
      themeMode: ThemeMode.system,
      home: SplashScreen(),
    );
  }
}

ThemeData _buildLightTheme() {
  const burgundy = Color(0xFF800020);
  const accent = Color(0xFF1976D2);
  return ThemeData(
    useMaterial3: true,
    colorScheme: ColorScheme.fromSeed(seedColor: burgundy, primary: burgundy, secondary: accent),
    scaffoldBackgroundColor: Colors.grey[50],
    appBarTheme: const AppBarTheme(backgroundColor: burgundy, foregroundColor: Colors.white),
    floatingActionButtonTheme: const FloatingActionButtonThemeData(backgroundColor: burgundy),
    cardTheme: const CardThemeData(shape: RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(12))), elevation: 2),
    visualDensity: VisualDensity.adaptivePlatformDensity,
  );
}

ThemeData _buildDarkTheme() {
  const burgundy = Color(0xFF800020);
  const accent = Color(0xFF1976D2);
  return ThemeData.dark().copyWith(
    useMaterial3: true,
    colorScheme: const ColorScheme.dark(primary: burgundy, secondary: accent),
    appBarTheme: const AppBarTheme(backgroundColor: burgundy, foregroundColor: Colors.white),
    floatingActionButtonTheme: const FloatingActionButtonThemeData(backgroundColor: burgundy),
  );
}

// -------------------- Splash screen with simple walking animation --------------------
class SplashScreen extends StatefulWidget {
  @override
  State<SplashScreen> createState() => _SplashScreenState();
}

class _SplashScreenState extends State<SplashScreen> with SingleTickerProviderStateMixin {
  late final AnimationController _ctrl;
  late final Animation<double> _walkAnim;
  late final Animation<double> _bobAnim;

  @override
  void initState() {
    super.initState();
    _ctrl = AnimationController(vsync: this, duration: const Duration(seconds: 3));
    _walkAnim = CurvedAnimation(parent: _ctrl, curve: Curves.easeInOut);
    _bobAnim = Tween<double>(begin: -6, end: 6).animate(CurvedAnimation(parent: _ctrl, curve: Curves.easeInOutSine));

    // loop a few times then go to login page
    _ctrl.repeat(reverse: true);

    // After some seconds, stop repeating and navigate
    Future.delayed(const Duration(milliseconds: 2600), () async {
      await _ctrl.animateTo(1.0, duration: const Duration(milliseconds: 300));
      _ctrl.stop();
      if (mounted) Navigator.of(context).pushReplacement(MaterialPageRoute(builder: (_) => LoginPage()));
    });
  }

  @override
  void dispose() {
    _ctrl.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: SafeArea(
        child: Stack(
          children: [
            // background illustration (simple) - school silhouette
            Positioned.fill(
              child: Column(
                mainAxisAlignment: MainAxisAlignment.end,
                children: [
                  Container(height: 140, color: Colors.transparent),
                ],
              ),
            ),

            // Title and subtitle
            Align(
              alignment: Alignment.topCenter,
              child: Padding(
                padding: const EdgeInsets.symmetric(vertical: 60.0, horizontal: 24),
                child: Column(
                  mainAxisSize: MainAxisSize.min,
                  children: [
                    Text('EspePay', style: Theme.of(context).textTheme.headlineLarge?.copyWith(fontWeight: FontWeight.bold)),
                    const SizedBox(height: 8),
                    Text('Aplikasi sekolah: bayar SPP, lihat rapor, dan beri kabar', textAlign: TextAlign.center, style: Theme.of(context).textTheme.bodyMedium),
                  ],
                ),
              ),
            ),

            // Walking kid animation
            AnimatedBuilder(
              animation: _ctrl,
              builder: (context, child) {
                // horizontal position: move from left to center-right while animating
                final screenWidth = MediaQuery.of(context).size.width;
                final dx = -0.2 * screenWidth + (_walkAnim.value * 1.2 * screenWidth * 0.5);
                final bob = _bobAnim.value * (1 - (_walkAnim.value - 0.5).abs() * 2).abs();
                return Positioned(
                  left: dx.clamp(0.0, screenWidth - 120.0),
                  bottom: 90 + bob,
                  child: child!,
                );
              },
              child: const SizedBox(width: 120, height: 140, child: _WalkingKid()),
            ),

            // small loading indicator bottom
            Align(alignment: Alignment.bottomCenter, child: Padding(padding: const EdgeInsets.only(bottom: 28.0), child: Column(mainAxisSize: MainAxisSize.min, children: const [CircularProgressIndicator(), SizedBox(height: 8), Text('Memuat...')])))
          ],
        ),
      ),
    );
  }
}

// A very simple cartoon "walking kid" built from basic shapes.
class _WalkingKid extends StatefulWidget {
  const _WalkingKid();
  @override
  State<_WalkingKid> createState() => _WalkingKidState();
}

class _WalkingKidState extends State<_WalkingKid> with SingleTickerProviderStateMixin {
  late final AnimationController _legCtrl;

  @override
  void initState() {
    super.initState();
    _legCtrl = AnimationController(vsync: this, duration: const Duration(milliseconds: 600))..repeat(reverse: true);
  }

  @override
  void dispose() {
    _legCtrl.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return AnimatedBuilder(
      animation: _legCtrl,
      builder: (context, child) {
        final leftLeg = Tween<double>(begin: -0.25, end: 0.25).evaluate(_legCtrl);
        final rightLeg = Tween<double>(begin: 0.25, end: -0.25).evaluate(_legCtrl);
        return Stack(
          children: [
            // backpack
            Positioned(
              left: 6,
              top: 28,
              child: Container(width: 46, height: 46, decoration: BoxDecoration(color: Colors.blue[700], borderRadius: BorderRadius.circular(8))),
            ),
            // body
            Positioned(
              left: 30,
              top: 34,
              child: Container(width: 40, height: 56, decoration: BoxDecoration(color: Colors.orange[300], borderRadius: BorderRadius.circular(8))),
            ),
            // head
            Positioned(
              left: 36,
              top: 6,
              child: const CircleAvatar(radius: 18, backgroundColor: Colors.brown, child: Icon(Icons.person, color: Colors.white, size: 20)),
            ),
            // left arm
            Positioned(
              left: 14,
              top: 46,
              child: Transform.rotate(angle: leftLeg * 0.5, child: Container(width: 8, height: 34, decoration: BoxDecoration(color: Colors.orange[300], borderRadius: BorderRadius.circular(6)))),
            ),
            // right arm
            Positioned(
              left: 74,
              top: 46,
              child: Transform.rotate(angle: rightLeg * 0.5, child: Container(width: 8, height: 34, decoration: BoxDecoration(color: Colors.orange[300], borderRadius: BorderRadius.circular(6)))),
            ),
            // left leg
            Positioned(
              left: 36,
              top: 86,
              child: Transform.rotate(angle: leftLeg, alignment: Alignment.topCenter, child: Container(width: 10, height: 42, decoration: BoxDecoration(color: Colors.brown[700], borderRadius: BorderRadius.circular(6)))),
            ),
            // right leg
            Positioned(
              left: 58,
              top: 86,
              child: Transform.rotate(angle: rightLeg, alignment: Alignment.topCenter, child: Container(width: 10, height: 42, decoration: BoxDecoration(color: Colors.brown[700], borderRadius: BorderRadius.circular(6)))),
            ),
          ],
        );
      },
    );
  }
}

// -------------------- Dummy Login Page --------------------
class LoginPage extends StatefulWidget {
  @override
  State<LoginPage> createState() => _LoginPageState();
}

class _LoginPageState extends State<LoginPage> {
  final _formKey = GlobalKey<FormState>();
  final _emailCtrl = TextEditingController();
  final _passCtrl = TextEditingController();
  bool _loading = false;

  @override
  void dispose() {
    _emailCtrl.dispose();
    _passCtrl.dispose();
    super.dispose();
  }

  void _doLogin() async {
    if (!_formKey.currentState!.validate()) return;
    setState(() => _loading = true);
    await Future.delayed(const Duration(milliseconds: 900));
    setState(() => _loading = false);

    // Dummy route: go to role selector
    Navigator.of(context).pushReplacement(MaterialPageRoute(builder: (_) => RoleSelectScreen()));
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Login')),
      body: Padding(
        padding: const EdgeInsets.all(20.0),
        child: Center(
          child: ConstrainedBox(
            constraints: const BoxConstraints(maxWidth: 420),
            child: Card(
              shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),
              child: Padding(
                padding: const EdgeInsets.all(18.0),
                child: Form(
                  key: _formKey,
                  child: Column(mainAxisSize: MainAxisSize.min, children: [
                    Text('Masuk ke EspePay', style: Theme.of(context).textTheme.titleMedium?.copyWith(fontWeight: FontWeight.bold)),
                    const SizedBox(height: 12),
                    TextFormField(
                      controller: _emailCtrl,
                      decoration: const InputDecoration(prefixIcon: Icon(Icons.email), labelText: 'Email / Username'),
                      validator: (v) => v == null || v.isEmpty ? 'Masukkan email atau username' : null,
                    ),
                    const SizedBox(height: 12),
                    TextFormField(
                      controller: _passCtrl,
                      decoration: const InputDecoration(prefixIcon: Icon(Icons.lock), labelText: 'Password'),
                      obscureText: true,
                      validator: (v) => v == null || v.length < 4 ? 'Password minimal 4 karakter' : null,
                    ),
                    const SizedBox(height: 16),
                    SizedBox(
                      width: double.infinity,
                      child: ElevatedButton(
                        onPressed: _loading ? null : _doLogin,
                        child: _loading ? const SizedBox(height: 18, width: 18, child: CircularProgressIndicator(strokeWidth: 2, color: Colors.white)) : const Text('Masuk'),
                      ),
                    ),
                    const SizedBox(height: 8),
                    TextButton(onPressed: () => Navigator.of(context).push(MaterialPageRoute(builder: (_) => RoleSelectScreen())), child: const Text('Lewati (Demo)'))
                  ]),
                ),
              ),
            ),
          ),
        ),
      ),
    );
  }
}

// -------------------- Role select (Parent / Student / Teacher) --------------------
class RoleSelectScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: SafeArea(
        child: Padding(
          padding: const EdgeInsets.all(20.0),
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              const SizedBox(height: 12),
              Text('EspePay', style: Theme.of(context).textTheme.headlineSmall?.copyWith(fontWeight: FontWeight.bold)),
              const SizedBox(height: 8),
              Text('Aplikasi pembayaran & manajemen sekolah — untuk orang tua, siswa, dan guru.', style: Theme.of(context).textTheme.bodyMedium),
              const SizedBox(height: 28),

              _RoleCard(title: 'Wali Murid / Orang Tua', subtitle: 'Lihat tagihan SPP, rapor, chat wali kelas', icon: Icons.family_restroom, onTap: () => Navigator.push(context, MaterialPageRoute(builder: (_) => HomeScreen(role: Role.parent)))),
              const SizedBox(height: 12),
              _RoleCard(title: 'Siswa', subtitle: 'Lihat jadwal, materi, ekstrakurikuler', icon: Icons.school, onTap: () => Navigator.push(context, MaterialPageRoute(builder: (_) => HomeScreen(role: Role.student)))),
              const SizedBox(height: 12),
              _RoleCard(title: 'Guru / Wali Kelas', subtitle: 'Kelola presensi, nilai, pengumuman', icon: Icons.person_search, onTap: () => Navigator.push(context, MaterialPageRoute(builder: (_) => HomeScreen(role: Role.teacher)))),

              const Spacer(),
              Text('Demo: tekan role untuk masuk ke mockup', textAlign: TextAlign.center, style: TextStyle(color: Colors.grey[600])),
            ],
          ),
        ),
      ),
    );
  }
}

class _RoleCard extends StatelessWidget {
  final String title, subtitle;
  final IconData icon;
  final VoidCallback onTap;
  const _RoleCard({required this.title, required this.subtitle, required this.icon, required this.onTap});
  @override
  Widget build(BuildContext context) {
    return Card(
      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),
      child: ListTile(
        leading: CircleAvatar(backgroundColor: Theme.of(context).colorScheme.primaryContainer, child: Icon(icon, color: Theme.of(context).colorScheme.onPrimaryContainer)),
        title: Text(title, style: const TextStyle(fontWeight: FontWeight.w600)),
        subtitle: Text(subtitle),
        trailing: Icon(Icons.arrow_forward_ios, size: 16),
        onTap: onTap,
      ),
    );
  }
}

enum Role { parent, student, teacher }

// -------------------- HomeScreen and rest of mockup (kept mostly same) --------------------
class HomeScreen extends StatefulWidget {
  final Role role;
  const HomeScreen({required this.role});
  @override
  State<HomeScreen> createState() => _HomeScreenState();
}

class _HomeScreenState extends State<HomeScreen> {
  int _index = 0;

  @override
  Widget build(BuildContext context) {
    final title = widget.role == Role.parent ? 'Dashboard - Orang Tua' : widget.role == Role.student ? 'Dashboard - Siswa' : 'Dashboard - Guru';
    return Scaffold(
      appBar: AppBar(
        title: Text(title),
        actions: [
          IconButton(icon: const Icon(Icons.notifications_none), onPressed: () => Navigator.push(context, MaterialPageRoute(builder: (_) => NotificationsPage()))),
          IconButton(icon: const Icon(Icons.person), onPressed: () => Navigator.push(context, MaterialPageRoute(builder: (_) => ProfilePage()))),
        ],
      ),
      drawer: _AppDrawer(role: widget.role),
      body: IndexedStack(index: _index, children: [
        Dashboard(role: widget.role),
        PaymentsPageCompact(role: widget.role),
        MessagesCompact(role: widget.role),
        MorePage(role: widget.role),
      ]),
      bottomNavigationBar: NavigationBar(selectedIndex: _index, onDestinationSelected: (i) => setState(() => _index = i), destinations: const [
        NavigationDestination(icon: Icon(Icons.home_outlined), label: 'Home'),
        NavigationDestination(icon: Icon(Icons.payment_outlined), label: 'Payments'),
        NavigationDestination(icon: Icon(Icons.message_outlined), label: 'Chat'),
        NavigationDestination(icon: Icon(Icons.grid_view_outlined), label: 'More'),
      ]),
      floatingActionButton: _index == 1 ? FloatingActionButton.extended(icon: const Icon(Icons.add), label: const Text('Bayar'), onPressed: () {}) : null,
    );
  }
}

class _AppDrawer extends StatelessWidget {
  final Role role;
  const _AppDrawer({required this.role});
  @override
  Widget build(BuildContext context) {
    return Drawer(
      child: SafeArea(
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.stretch,
          children: [
            DrawerHeader(
              decoration: BoxDecoration(color: Theme.of(context).colorScheme.primary),
              child: Row(children: [
                CircleAvatar(radius: 36, backgroundColor: Colors.white, child: Icon(Icons.school, color: Theme.of(context).colorScheme.primary)),
                const SizedBox(width: 12),
                Column(crossAxisAlignment: CrossAxisAlignment.start, mainAxisAlignment: MainAxisAlignment.center, children: const [
                  Text('SDN Contoh', style: TextStyle(color: Colors.white, fontWeight: FontWeight.bold)),
                  SizedBox(height: 4),
                  Text('admin@sekolah.id', style: TextStyle(color: Colors.white70)),
                ])
              ]),
            ),
            ListTile(leading: const Icon(Icons.announcement), title: const Text('Pengumuman'), onTap: () => Navigator.push(context, MaterialPageRoute(builder: (_) => AnnouncementsPage()))),
            ListTile(leading: const Icon(Icons.school), title: const Text('Rapor'), onTap: () => Navigator.push(context, MaterialPageRoute(builder: (_) => ReportCardPage()))),
            ListTile(leading: const Icon(Icons.schedule), title: const Text('Jadwal Pelajaran'), onTap: () => Navigator.push(context, MaterialPageRoute(builder: (_) => SchedulePage()))),
            ListTile(leading: const Icon(Icons.groups), title: const Text('Ekstrakurikuler'), onTap: () => Navigator.push(context, MaterialPageRoute(builder: (_) => ExtracurricularPage()))),
            ListTile(leading: const Icon(Icons.check_box_outlined), title: const Text('Rekap Presensi'), onTap: () => Navigator.push(context, MaterialPageRoute(builder: (_) => AttendancePage()))),
            const Spacer(),
            ListTile(leading: const Icon(Icons.logout), title: const Text('Logout'), onTap: () {}),
          ],
        ),
      ),
    );
  }
}

// -------------------- Dashboard and other pages are unchanged (kept concise) --------------------
class Dashboard extends StatelessWidget {
  final Role role;
  const Dashboard({required this.role});

  @override
  Widget build(BuildContext context) {
    return RefreshIndicator(
      onRefresh: () async {},
      child: ListView(padding: const EdgeInsets.all(16), children: [
        _WelcomeCard(role: role),
        const SizedBox(height: 12),
        _SummaryRow(),
        const SizedBox(height: 12),
        _Section(title: 'Tagihan Terbaru', child: _PaymentsList()),
        const SizedBox(height: 12),
        _Section(title: 'Pengumuman Sekolah', child: _AnnouncementsPreview()),
        const SizedBox(height: 12),
        _Section(title: 'Jadwal Hari Ini', child: _SchedulePreview()),
      ]),
    );
  }
}

class _WelcomeCard extends StatelessWidget {
  final Role role;
  const _WelcomeCard({required this.role});
  @override
  Widget build(BuildContext context) {
    final name = role == Role.parent ? 'Orang Tua (Budi)' : role == Role.student ? 'Siswa (Budi)' : 'Guru (Ibu Siti)';
    return Card(
      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(14)),
      child: Padding(
        padding: const EdgeInsets.all(16.0),
        child: Row(children: [
          CircleAvatar(radius: 30, backgroundColor: Theme.of(context).colorScheme.primaryContainer, child: Icon(Icons.person, size: 30, color: Theme.of(context).colorScheme.onPrimaryContainer)),
          const SizedBox(width: 12),
          Expanded(child: Column(crossAxisAlignment: CrossAxisAlignment.start, children: [Text(name, style: const TextStyle(fontWeight: FontWeight.bold, fontSize: 16)), const SizedBox(height: 6), const Text('Selamat datang di EspePay — kelola pembayaran & aktivitas sekolah di sini.')])),
        ]),
      ),
    );
  }
}

class _SummaryRow extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Row(children: const [
      Expanded(child: _TinyCard(title: 'Total Tagihan', value: 'IDR 1.450.000')),
      SizedBox(width: 10),
      Expanded(child: _TinyCard(title: 'Terbayar', value: 'IDR 1.100.000')),
      SizedBox(width: 10),
      Expanded(child: _TinyCard(title: 'Telat', value: 'IDR 350.000')),
    ]);
  }
}

class _TinyCard extends StatelessWidget {
  final String title, value;
  const _TinyCard({required this.title, required this.value});
  @override
  Widget build(BuildContext context) {
    return Card(
      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),
      elevation: 1,
      child: Padding(padding: const EdgeInsets.all(12), child: Column(crossAxisAlignment: CrossAxisAlignment.start, children: [Text(title, style: TextStyle(color: Colors.grey[700], fontSize: 12)), const SizedBox(height: 8), Text(value, style: const TextStyle(fontWeight: FontWeight.bold))])),
    );
  }
}

class _Section extends StatelessWidget {
  final String title;
  final Widget child;
  const _Section({required this.title, required this.child});
  @override
  Widget build(BuildContext context) {
    return Column(crossAxisAlignment: CrossAxisAlignment.start, children: [Text(title, style: const TextStyle(fontWeight: FontWeight.bold)), const SizedBox(height: 8), Card(child: Padding(padding: const EdgeInsets.all(12), child: child))]);
  }
}

class _PaymentsList extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final sample = List.generate(4, (i) => {'title': 'SPP Bulan ${i + 1}', 'amount': 'IDR 350.000', 'status': i % 3 == 0 ? 'Lunas' : i % 3 == 1 ? 'Belum Bayar' : 'Telat'});
    return Column(children: sample.map((p) => ListTile(leading: const Icon(Icons.receipt_long), title: Text(p['title']!), subtitle: Text(p['amount']! + ' • ' + p['status']!), trailing: p['status'] == 'Lunas' ? const Icon(Icons.check_circle, color: Colors.green) : p['status'] == 'Telat' ? const Icon(Icons.error, color: Colors.red) : const Icon(Icons.hourglass_empty, color: Colors.orange), onTap: () {})).toList());
  }
}

class _AnnouncementsPreview extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Column(children: [ListTile(leading: const Icon(Icons.campaign), title: const Text('Libur Nasional: Hari Kemerdekaan'), subtitle: const Text('Tanggal 17 Agustus libur semua sekolah')), ListTile(leading: const Icon(Icons.info_outline), title: const Text('Pembagian Rapor'), subtitle: const Text('Rapor dibagikan pada minggu depan'))]);
  }
}

class _SchedulePreview extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Column(children: [ListTile(leading: const Icon(Icons.schedule), title: const Text('08:00 - 09:30'), subtitle: const Text('Matematika')), ListTile(leading: const Icon(Icons.schedule), title: const Text('09:45 - 11:15'), subtitle: const Text('Bahasa Indonesia'))]);
  }
}

class PaymentsPageCompact extends StatelessWidget {
  final Role role;
  const PaymentsPageCompact({required this.role});
  @override
  Widget build(BuildContext context) {
    return ListView(padding: const EdgeInsets.all(12), children: [
      const SizedBox(height: 6),
      Card(child: Padding(padding: const EdgeInsets.all(12), child: Column(crossAxisAlignment: CrossAxisAlignment.start, children: [Text('Bayar SPP', style: TextStyle(fontWeight: FontWeight.bold)), const SizedBox(height: 8), Text('Pilih metode pembayaran: QR, Transfer, atau Kartu')]))),
      const SizedBox(height: 12),
      ...List.generate(6, (i) => Card(margin: const EdgeInsets.only(bottom: 10), child: ListTile(leading: CircleAvatar(child: Text('S${i+1}')), title: Text('SPP Bulan ${i+1}'), subtitle: Text('IDR ${300000 + i*25000}'), trailing: Text(i%3==0 ? 'Lunas' : i%3==1 ? 'Belum' : 'Telat'))))
    ]);
  }
}

class MessagesCompact extends StatelessWidget {
  final Role role;
  const MessagesCompact({required this.role});
  @override
  Widget build(BuildContext context) {
    return ListView(padding: const EdgeInsets.all(12), children: [
      TextField(decoration: InputDecoration(prefixIcon: const Icon(Icons.search), hintText: 'Cari pesan/ortu...', border: OutlineInputBorder(borderRadius: BorderRadius.circular(10)))),
      const SizedBox(height: 10),
      ...List.generate(8, (i) => ListTile(leading: CircleAvatar(child: Text('P${i+1}')), title: Text('Orang Tua ${i+1}'), subtitle: Text('Pertanyaan mengenai pembayaran'), trailing: const Text('1h')))
    ]);
  }
}

class MorePage extends StatelessWidget {
  final Role role;
  const MorePage({required this.role});
  @override
  Widget build(BuildContext context) {
    return ListView(padding: const EdgeInsets.all(12), children: [
      ListTile(leading: const Icon(Icons.campaign), title: const Text('Pengumuman & Agenda'), onTap: () => Navigator.push(context, MaterialPageRoute(builder: (_) => AnnouncementsPage()))),
      ListTile(leading: const Icon(Icons.book), title: const Text('Materi Pembelajaran'), onTap: () => Navigator.push(context, MaterialPageRoute(builder: (_) => LearningResourcesPage()))),
      ListTile(leading: const Icon(Icons.grade), title: const Text('Rapor & Nilai'), onTap: () => Navigator.push(context, MaterialPageRoute(builder: (_) => ReportCardPage()))),
      ListTile(leading: const Icon(Icons.schedule), title: const Text('Jadwal Pelajaran'), onTap: () => Navigator.push(context, MaterialPageRoute(builder: (_) => SchedulePage()))),
      ListTile(leading: const Icon(Icons.event), title: const Text('Jadwal Ekstrakurikuler'), onTap: () => Navigator.push(context, MaterialPageRoute(builder: (_) => ExtracurricularPage()))),
      ListTile(leading: const Icon(Icons.check_box), title: const Text('Rekap Presensi'), onTap: () => Navigator.push(context, MaterialPageRoute(builder: (_) => AttendancePage()))),
    ]);
  }
}

class AnnouncementsPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final notes = [
      'Libur Nasional: 17 Agustus',
      'Pembagian rapor: Jumat, 28 Nov',
      'Donasi pembangunan: hubungi bendahara',
    ];
    return Scaffold(
      appBar: AppBar(title: const Text('Pengumuman')),
      body: ListView.separated(padding: const EdgeInsets.all(12), itemCount: notes.length, separatorBuilder: (_,__)=>const Divider(), itemBuilder: (c,i)=>ListTile(leading: const Icon(Icons.announcement), title: Text(notes[i]))),
    );
  }
}

class LearningResourcesPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final items = ['Materi Matematika', 'Video Bahasa Indonesia', 'Latihan IPA'];
    return Scaffold(
      appBar: AppBar(title: const Text('Materi Pembelajaran')),
      body: ListView.builder(padding: const EdgeInsets.all(12), itemCount: items.length, itemBuilder: (c,i)=>Card(child: ListTile(leading: const Icon(Icons.menu_book), title: Text(items[i]), trailing: const Icon(Icons.open_in_new))))
    );
  }
}

class ReportCardPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final subjects = {'Matematika': 'A', 'Bahasa Indonesia': 'B+', 'IPA': 'A-'};
    return Scaffold(
      appBar: AppBar(title: const Text('Rapor')),
      body: ListView(padding: const EdgeInsets.all(12), children: [Card(child: Padding(padding: const EdgeInsets.all(12), child: Column(crossAxisAlignment: CrossAxisAlignment.start, children: [Text('Rapor Semester 1', style: const TextStyle(fontWeight: FontWeight.bold)), const SizedBox(height: 12), ...subjects.entries.map((e)=>ListTile(title: Text(e.key), trailing: Text(e.value))).toList()])))]),
    );
  }
}

class SchedulePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final schedule = ['08:00 Matematika', '09:30 Bahasa', '11:00 IPA'];
    return Scaffold(appBar: AppBar(title: const Text('Jadwal Pelajaran')), body: ListView(padding: const EdgeInsets.all(12), children: schedule.map((s)=>Card(child: ListTile(title: Text(s)))).toList()));
  }
}

class ExtracurricularPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final activities = ['Basket', 'Pramuka', 'Seni Tari'];
    return Scaffold(appBar: AppBar(title: const Text('Ekstrakurikuler')), body: ListView(padding: const EdgeInsets.all(12), children: activities.map((a)=>Card(child: ListTile(title: Text(a), trailing: const Icon(Icons.arrow_forward_ios, size: 16), onTap: (){}))).toList()));
  }
}

class AttendancePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final rows = List.generate(7, (i) => {'date': '2025-09-${10+i}', 'in': '07:50', 'out': i%2==0 ? '15:00' : '-'});
    return Scaffold(appBar: AppBar(title: const Text('Rekap Presensi')), body: ListView(padding: const EdgeInsets.all(12), children: rows.map((r)=>Card(child: ListTile(title: Text(r['date']!), subtitle: Text('Masuk: ${r['in']} • Pulang: ${r['out']}')))).toList()));
  }
}

class NotificationsPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final notes = ['Tagihan Januari belum dibayar', 'Rapat orang tua: Jumat 10:00', 'Kegiatan ekstrakurikuler: Jumat'];
    return Scaffold(appBar: AppBar(title: const Text('Notifikasi')), body: ListView.separated(padding: const EdgeInsets.all(12), itemCount: notes.length, separatorBuilder: (_,__)=>const Divider(), itemBuilder: (c,i)=>ListTile(leading: const Icon(Icons.notifications), title: Text(notes[i]))));
  }
}

class ProfilePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(appBar: AppBar(title: const Text('Profil')), body: ListView(padding: const EdgeInsets.all(12), children: [Card(child: ListTile(leading: const Icon(Icons.person), title: const Text('Dedy K Wijaya'), subtitle: const Text('dkwijaya.gin@gmail.com'))), Card(child: ListTile(leading: const Icon(Icons.settings), title: const Text('Pengaturan Akun')))]));
  }
}

// End of mockup

